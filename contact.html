<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact</title>
    <link rel="stylesheet" href="css/retex.css">
    <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init("YOUR_USER_ID"); // Remplace "YOUR_USER_ID" par ton ID utilisateur EmailJS
        })();
        
        function sendMail() {
            let params = {
                name: document.getElementById("name").value,
                email: document.getElementById("email").value,
                subject: document.getElementById("subject").value,
                message: document.getElementById("message").value,
            };

            const serviceID = "service_fdxo5tr";
            const templateID = "template_5gji2h9";

            emailjs.send(serviceID, templateID, params)
                .then(res => {
                    // Réinitialiser les champs du formulaire
                    document.getElementById("name").value = "";
                    document.getElementById("email").value = "";
                    document.getElementById("subject").value = "";
                    document.getElementById("message").value = "";

                    // Afficher le message de succès
                    const successMessage = document.getElementById("success-message");
                    successMessage.style.display = "block";
                    setTimeout(() => {
                        successMessage.style.display = "none";
                        // Rafraîchir la page après 5 secondes
                        window.location.reload();
                    }, 5000); // Afficher pendant 5 secondes

                    console.log(res);
                })
                .catch(err => {
                    // Afficher le message d'erreur
                    const errorMessage = document.getElementById("error-message");
                    errorMessage.style.display = "block";
                    setTimeout(() => {
                        errorMessage.style.display = "none";
                        // Rafraîchir la page après 5 secondes
                        window.location.reload();
                    }, 5000); // Afficher pendant 5 secondes

                    console.log(err);
                });
        }
    </script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="navbar-logo">
                <img src="images/l1.png" alt="Logo">
            </div>
            <div class="navbar-menu">
                <div class="menu-icon">
                    <div class="bar"></div>
                    <div class="bar"></div>
                    <div class="bar"></div>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="contact-header">
            Contact<span class="color"> Moi</span>
            <div class="contact-header-caption"><span class="color"> entrer</span> en contact.</div>
        </div>

        <section id="contact">
            <div class="contact-container">
                <div class="contact-form">
                    <h2>Envoie moi un message</h2>
                    <form id="contact-form" onsubmit="sendMail(); return false;">
                        <label for="name">Nom :</label>
                        <input type="text" id="name" name="name" required>
                        
                        <label for="email">Email :</label>
                        <input type="email" id="email" name="email" required>
                        
                        <label for="subject">Sujet :</label>
                        <input type="text" id="subject" name="subject" required>
                        
                        <label for="message">Message :</label>
                        <textarea id="message" name="message" required></textarea>
                        
                        <button type="submit">Envoyer</button>
                    </form>
                    <div id="success-message" style="display: none; color: green;">Message envoyé avec succès!</div>
                    <div id="error-message" style="display: none; color: red;">Erreur lors de l'envoi du message.</div>
                </div>
                <div class="contact-info">
                    <h2>Contact Info</h2>
                    <div class="img-info">
                        <img src="images/icon-name.png" alt="name">
                        <p><strong>Nom :</strong> Rossignol Loïc</p>
                        <img src="images/icon-location.png" alt="location">
                        <p><strong>Location :</strong> Perpignan, France</p>
                        <img src="images/icon-phone.png" alt="phone">
                        <p><strong>Téléphone :</strong> +3365810849</p>
                        <img src="images/icon-email.png" alt="email">
                        <p><strong>Email :</strong> loic.rossignol65@gmail.com</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <p>&copy; 2024 – Rossignol Loïc – Tous droits réservés.</p>
    </footer>
</body>
</html>